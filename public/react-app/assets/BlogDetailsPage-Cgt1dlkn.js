import{u as h,b as d,w as f,x as y,r as x,y as m,j as e,z as b,f as g,m as N,A as C,C as k,D as S,E as w,l as I,F as L,G as F,H as _,I as B,g as P,J as H,K as E,M as R,e as z,N as U,O as A,Q as G,S as M,T as $,W as u,U as T}from"./index-BzafhcuX.js";import{F as W,S as v}from"./Sidebar-DikHfiGF.js";import{G as O,H as J,N as K,F as Q}from"./Footer-CYlrCiKh.js";const V=({comment:s})=>{var l,n,p;const a=h(),r=d(f),t=d(y),[i,c]=x.useState(null),o=()=>{c(s.id),a(C(s.id))},j=d(m);return e.jsx("div",{className:"py-3 border-b border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"w-[80%]",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:b((l=s==null?void 0:s.user)==null?void 0:l.profile_pic),alt:"oxford-blog-image",className:"rounded-[50%] h-[3rem] w-[3rem] object-cover"}),e.jsxs("div",{children:[e.jsx("h4",{children:((n=s==null?void 0:s.user)==null?void 0:n.first_name)+" "+((p=s==null?void 0:s.user)==null?void 0:p.last_name)}),e.jsx("span",{className:"text-sm text-red-color",children:g(s==null?void 0:s.created_at)})]})]})}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"text-sm text-head-color",children:s==null?void 0:s.content})})]}),e.jsx("div",{className:"text-sm",children:j&&e.jsx("button",{type:"button",className:"text-red-color",onClick:o,children:r==="loading"&&i===s.id?e.jsx(N,{}):(t==null?void 0:t.user.id)===s.author_id?"Remove":""})})]})})},Y=({blogDetails:s})=>{const a=x.useRef(),r=h(),t=d(k),i=d(S),c=d(w),o=d(m),j=()=>{var n;let l=(n=a.current)==null?void 0:n.value;l||F("Please write your comment!"),r(_(s.id,l)),a.current.value=""};return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl",children:"LEAVE A REPLY"}),e.jsxs("div",{className:"py-3",children:[e.jsx("textarea",{placeholder:"Write your comment here",className:"w-full h-[10rem] bg-transparent border border-gray-300 p-3",ref:a}),e.jsxs("div",{className:"py-3 flex items-center gap-6",children:[e.jsx(I,{title:c==="loading"?"Loading...":"Submit",onClick:j,disabled:!o}),c==="loading"&&e.jsx(N,{})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl",children:"All Comments"}),i==="loading"&&e.jsx(e.Fragment,{children:t.map((l,n)=>e.jsx(L,{},n))}),i==="idle"&&(t==null?void 0:t.length)!==0&&e.jsx(e.Fragment,{children:t.map((l,n)=>e.jsx(V,{comment:l},n))}),i==="idle"&&(t==null?void 0:t.length)===0&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-2",children:e.jsx("span",{children:"0 Comments"})})})]})]})},q=({url:s,title:a})=>{const r=()=>{const t=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(s)}&t=${encodeURIComponent(a)}`;window.open(t,"_blank","width=600,height=400")};return e.jsxs("div",{className:"flex items-center gap-2 justify-center w-[20%] bg-[#3a579a] py-2 text-white mt-2 mb-6 cursor-pointer",onClick:r,children:[e.jsx("div",{className:"text-lg",children:e.jsx(W,{})}),e.jsx("div",{className:"text-lg",children:e.jsx("span",{children:"Facebook"})})]})};function X(s){return O({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.6 64c-36.4 0-70.7 16.7-93.6 43.9C233.1 80.7 198.8 64 162.4 64 97.9 64 48 114.2 48 179.1c0 79.5 70.7 143.3 177.8 241.7L256 448l30.2-27.2C393.3 322.4 464 258.6 464 179.1 464 114.2 414.1 64 349.6 64zm-80.8 329.3l-4.2 3.9-8.6 7.8-8.6-7.8-4.2-3.9c-50.4-46.3-94-86.3-122.7-122-28-34.7-40.4-63.1-40.4-92.2 0-22.9 8.4-43.9 23.7-59.3 15.2-15.4 36-23.8 58.6-23.8 26.1 0 52 12.2 69.1 32.5l24.5 29.1 24.5-29.1c17.1-20.4 43-32.5 69.1-32.5 22.6 0 43.4 8.4 58.7 23.8 15.3 15.4 23.7 36.5 23.7 59.3 0 29-12.5 57.5-40.4 92.2-28.8 35.7-72.3 75.7-122.8 122z"},child:[]}]})(s)}const Z=({blogDetails:s})=>{const a=B.sanitize(s.description);let r=P(s.image);const t=h(),i=d(H),c=d(m),o=()=>{t(E(s.id))};return e.jsxs("div",{className:"col-span-5 p-6 border border-gray-300 my-6 text-heading-color bg-white",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-red-color",children:e.jsx("span",{children:s.category})}),e.jsx("div",{className:"text-2xl font-semibold py-2",children:e.jsx("h2",{children:s.title})}),e.jsx("div",{className:"bordered-text text-sm text-red-color",children:e.jsx("span",{children:g(s==null?void 0:s.created_at)})}),e.jsx("div",{className:"py-6 flex justify-center",children:e.jsx("img",{src:r,alt:"oxford-blog-image"})})]}),c&&e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("div",{className:"text-2xl",children:e.jsx("button",{onClick:o,className:`${i!=null&&i.liked?"text-red-500":""}`,children:e.jsx(X,{})})}),e.jsx("div",{children:e.jsx("span",{className:"font-semibold",children:i==null?void 0:i.likeCount})})]}),e.jsxs("div",{className:"",children:[e.jsx("span",{className:"font-semibold text-sm",children:"Share Post"}),e.jsx(q,{url:`https://17c8-103-166-172-226.ngrok-free.app/share/blog/${s.id}`,title:s.title})]}),e.jsx("div",{dangerouslySetInnerHTML:{__html:a},className:"break-words"}),e.jsx("div",{className:"text-red-color border border-gray-400 border-dashed p-3 text-lg my-4",children:e.jsx("span",{children:g(s==null?void 0:s.created_at)})}),e.jsx(Y,{blogDetails:s})]})},te=()=>{const s=d(R),a=d(z),r=h(),t=U();return x.useEffect(()=>(r(A(t.id)),r(G(t.id)),()=>{r(M([])),r($({liked:!1,likeCount:0}))}),[t.id]),e.jsxs(x.Fragment,{children:[e.jsx(J,{}),e.jsx(K,{}),a==="idle"&&Object.keys(s).length!==0&&e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-7 gap-4 relative",children:[e.jsx(Z,{blogDetails:s}),e.jsx(v,{margin:!0})]})}),a==="loading"&&e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-7 gap-4 relative",children:[e.jsx(T,{}),e.jsx(v,{margin:!0})]})}),e.jsx(Q,{})]})};export{te as default};
